# API GERENCIAMENTO DE USUARIOS üë•

## CONCEITOS

* Este c√≥digo fornece uma API completa para a cria√ß√£o, leitura, atualiza√ß√£o e exclus√£o de usu√°rios (conhecida como CRUD). Ele utiliza o Express para criar as rotas HTTP e o Prisma para interagir com o banco de dados MongoDB. A API √© capaz de lidar com requisi√ß√µes que enviam ou recebem dados em formato JSON, o que facilita a intera√ß√£o com aplicativos front-end ou outras aplica√ß√µes externas.

## Importa√ß√µes e Configura√ß√µes Iniciais
```bash
import { PrismaClient } from "@prisma/client";
import express from "express";
```

* O Prisma Client √© importado para permitir a comunica√ß√£o com o banco de dados MongoDB.
O Express √© importado para criar o servidor e gerenciar as rotas HTTP.
* O Express √© importado para criar o servidor e gerenciar as rotas HTTP.

```bash
const prisma = new PrismaClient();
const app = express();
const port = 3000;
```
* Aqui, √© instanciado o PrismaClient em uma vari√°vel prisma, que ser√° usada para executar consultas no banco de dados.
* app √© uma inst√¢ncia do Express que ser√° usada para configurar rotas e middlewares.
*A vari√°vel port define a porta onde o servidor ser√° executado (neste caso, a porta 3000).

## Middleware para Manipula√ß√£o de JSON

```bash
app.use(express.json());
```
* O app.use(express.json()) √© um middleware que indica ao Express que as requisi√ß√µes que contenham dados em formato JSON devem ser automaticamente interpretadas e convertidas em objetos JavaScript.

## Rota POST: Criar um Usu√°rio ‚¨Ö
```bash
app.post("/users", async (req, res) => {
  await prisma.user.create({
    data: {
      email: req.body.email,
      name: req.body.name,
      age: req.body.age,
    },
  });

  res.status(201).send("ok");
});
```
* A rota POST /users cria um novo usu√°rio no banco de dados.
* Utilizando o m√©todo prisma.user.create, os dados recebidos no corpo da requisi√ß√£o (req.body) s√£o armazenados no banco de dados. As informa√ß√µes esperadas s√£o email, name e age.
* Ap√≥s a cria√ß√£o do usu√°rio, a API responde com o c√≥digo de status 201 (Created) e a mensagem "ok".

## Rota GET: Listar Todos os Usu√°rios ‚û°
```bash
app.get("/users", async (req, res) => {
  const users = await prisma.user.findMany();
  res.status(200).json(users);
});
```
* A rota GET /users retorna todos os usu√°rios cadastrados no banco de dados.
* O m√©todo prisma.user.findMany √© usado para buscar todos os registros de usu√°rios.
* A resposta inclui o c√≥digo de status 200 (OK) e um array de objetos JSON contendo os dados dos usu√°rios.

## Rota PUT: Atualizar um Usu√°rio üìù
```bash
app.get("/users", async (req, res) => {
  const users = await prisma.user.findMany();
  res.status(200).json(users);
});
```
* A rota PUT /users/:id atualiza os dados de um usu√°rio espec√≠fico
* O m√©todo prisma.user.update busca um usu√°rio pelo id passado como par√¢metro na URL (req.params.id), e atualiza seus dados com as informa√ß√µes recebidas no corpo da requisi√ß√£o (req.body).
* A resposta cont√©m o c√≥digo de status 201 (Created) e a mensagem "ok".

## Rota DELETE: Remover um Usu√°rio ‚ùå
```bash
app.delete("/users/:id", async (req, res) => {
  await prisma.user.delete({
    where: {
      id: req.params.id,
    },
  });

  res.status(200).json({ message: "Usu√°rio removido com sucesso!" });
});
```
* A rota DELETE /users/:id remove um usu√°rio do banco de dados.
* O m√©todo prisma.user.delete deleta o usu√°rio correspondente ao id fornecido como par√¢metro na URL.
* Ap√≥s a exclus√£o, a API responde com o c√≥digo de status 200 (OK) e uma mensagem de confirma√ß√£o em formato JSON.

## Iniciando o Servidor
```bash
app.listen(port);
```
* A aplica√ß√£o √© iniciada na porta definida (neste caso, 3000) usando o m√©todo app.listen(port). A partir deste ponto, o servidor come√ßa a escutar requisi√ß√µes HTTP nas rotas configuradas.

